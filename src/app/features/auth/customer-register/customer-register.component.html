<div class="h-full flex items-center justify-center bg-gray-100 dark:bg-neutral-900 p-6">
    <div class="w-full">
        <div class="block rounded-lg bg-white shadow-lg dark:bg-neutral-800">
            
            <!-- Stepper -->
            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                <ol class="items-center w-full space-y-1 sm:flex sm:space-x-8 sm:space-y-0 rtl:space-x-reverse justify-center">
                    <li class="flex items-center space-x-2.5 rtl:space-x-reverse"
                        [ngClass]="{'text-blue-600 dark:text-blue-500': currentStep >= 1, 'text-gray-500 dark:text-gray-400': currentStep < 1}">
                        <span class="flex items-center justify-center w-8 h-8 border rounded-full shrink-0"
                            [ngClass]="{'border-blue-600 dark:border-blue-500': currentStep >= 1, 'border-gray-500 dark:border-gray-400': currentStep < 1}">
                            1
                        </span>
                        <span>
                            <h3 class="font-medium leading-tight">Registration</h3>
                            <p class="text-sm">Create your account</p>
                        </span>
                    </li>
                    
                    <li class="flex items-center space-x-2.5 rtl:space-x-reverse"
                        [ngClass]="{'text-blue-600 dark:text-blue-500': currentStep >= 2, 'text-gray-500 dark:text-gray-400': currentStep < 2}">
                        <span class="flex items-center justify-center w-8 h-8 border rounded-full shrink-0"
                            [ngClass]="{'border-blue-600 dark:border-blue-500': currentStep >= 2, 'border-gray-500 dark:border-gray-400': currentStep < 2}">
                            2
                        </span>
                        <span>
                            <h3 class="font-medium leading-tight">OTP Verification</h3>
                            <p class="text-sm">Verify your email</p>
                        </span>
                    </li>

                    <li class="flex items-center space-x-2.5 rtl:space-x-reverse"
                        [ngClass]="{'text-blue-600 dark:text-blue-500': currentStep >= 3, 'text-gray-500 dark:text-gray-400': currentStep < 3}">
                        <span class="flex items-center justify-center w-8 h-8 border rounded-full shrink-0"
                            [ngClass]="{'border-blue-600 dark:border-blue-500': currentStep >= 3, 'border-gray-500 dark:border-gray-400': currentStep < 3}">
                            3
                        </span>
                        <span>
                            <h3 class="font-medium leading-tight">Complete Profile</h3>
                            <p class="text-sm">Personal details</p>
                        </span>
                    </li>
                </ol>
            </div>

            <div class="lg:flex lg:flex-wrap p-3">

                <!-- Registration Form Step -->
                <div class="px-6 py-8 lg:w-6/12" *ngIf="currentStep === 1">
                    <div class="text-center">
                        <img class="mx-auto w-48"
                            src="https://untgtsclbjlgemwljimq.supabase.co/storage/v1/object/public/Wedding%20Vender%20managment%20System//logo.png"
                            alt="logo" />
                    </div>

                    <form [formGroup]="registerForm" (ngSubmit)="registerCustomer($event)">
                        <p class="mb-4 text-gray-600 dark:text-neutral-300">Please register an account</p>

                        <!-- Email Input -->
                        <div class="mb-4">
                            <label for="email"
                                class="block text-sm font-medium text-gray-600 dark:text-gray-300">Email</label>
                            <input type="email" id="email" formControlName="email" placeholder="Enter your email"
                                class="w-full px-4 py-2 mt-1 text-gray-800 bg-gray-100 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-gray-700 dark:text-white dark:border-gray-600" />
                            <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="text-red-500 text-sm mt-1">
                                <span *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</span>
                                <span *ngIf="registerForm.get('email')?.errors?.['email']">Please enter a valid email</span>
                            </div>
                        </div>

                        <!-- Username Input -->
                        <div class="mb-4">
                            <label for="username"
                                class="block text-sm font-medium text-gray-600 dark:text-gray-300">Username</label>
                            <input type="text" id="username" formControlName="username"
                                placeholder="Enter your username"
                                class="w-full px-4 py-2 mt-1 text-gray-800 bg-gray-100 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-gray-700 dark:text-white dark:border-gray-600" />
                            <div *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched" class="text-red-500 text-sm mt-1">
                                <span *ngIf="registerForm.get('username')?.errors?.['required']">Username is required</span>
                                <span *ngIf="registerForm.get('username')?.errors?.['minlength']">Username must be at least 3 characters</span>
                            </div>
                        </div>

                        <!-- Password Input -->
                        <div class="mb-4">
                            <label for="password"
                                class="block text-sm font-medium text-gray-600 dark:text-gray-300">Password</label>
                            <input type="password" id="password" formControlName="password"
                                placeholder="Enter your password"
                                class="w-full px-4 py-2 mt-1 text-gray-800 bg-gray-100 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-gray-700 dark:text-white dark:border-gray-600" />
                            <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="text-red-500 text-sm mt-1">
                                <span *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</span>
                                <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters</span>
                            </div>
                        </div>

                        <!-- Confirm Password Input -->
                        <div class="mb-4">
                            <label for="confirmPassword"
                                class="block text-sm font-medium text-gray-600 dark:text-gray-300">Confirm Password</label>
                            <input type="password" id="confirmPassword" formControlName="confirmPassword"
                                placeholder="Confirm your password"
                                class="w-full px-4 py-2 mt-1 text-gray-800 bg-gray-100 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-gray-700 dark:text-white dark:border-gray-600" />
                            <div *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched" class="text-red-500 text-sm mt-1">
                                <span *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Confirm Password is required</span>
                                <span *ngIf="registerForm.get('confirmPassword')?.errors?.['minlength']">Confirm Password must be at least 6 characters</span>
                            </div>
                            <div *ngIf="registerForm.errors?.['passwordsDoNotMatch'] && registerForm.get('confirmPassword')?.touched" class="text-red-500 text-sm mt-1">
                                Passwords do not match
                            </div>
                        </div>

                        <!-- Terms and Conditions -->
                        <div class="mb-4">
                            <label class="inline-flex items-center">
                                <input type="checkbox" formControlName="terms" class="form-checkbox h-4 w-4 text-blue-600">
                                <span class="ml-2 text-sm text-gray-600 dark:text-gray-300">I agree to the 
                                    <a href="#!" class="text-blue-500 hover:underline">Terms and Conditions</a>
                                </span>
                            </label>
                            <div *ngIf="registerForm.get('terms')?.invalid && registerForm.get('terms')?.touched" class="text-red-500 text-sm mt-1">
                                You must agree to the terms and conditions
                            </div>
                        </div>

                        <!-- Sign Up Button -->
                        <div class="text-center mb-4">
                            <button type="submit" [disabled]="isSubmitting || registerForm.invalid"
                                class="w-full px-6 py-2.5 text-white font-semibold text-sm uppercase rounded-lg shadow-md transition-all bg-gradient-to-r bg-blue-500 hover:shadow-lg hover:brightness-110 focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed">
                                <span *ngIf="!isSubmitting">Sign Up</span>
                                <span *ngIf="isSubmitting">Signing Up...</span>
                            </button>
                        </div>

                        <!-- Login Redirect -->
                        <div class="mt-6 flex justify-between items-center">
                            <p class="text-sm text-gray-600 dark:text-gray-300">Already have an account?</p>
                            <button type="button"
                                class="px-6 py-2 text-blue-500 border border-blue-500 rounded-lg text-sm font-medium transition-all hover:bg-blue-500 hover:text-white focus:ring-2 focus:ring-blue-500"
                                routerLink="/auth/customer-login">
                                Login
                            </button>
                        </div>
                    </form>
                </div>

                <!-- OTP Verification Step -->
                <div class="px-6 py-8 lg:w-6/12" *ngIf="currentStep === 2">
                    <div class="text-center">
                        <img class="mx-auto w-48"
                            src="https://untgtsclbjlgemwljimq.supabase.co/storage/v1/object/public/Wedding%20Vender%20managment%20System//logo.png"
                            alt="logo" />
                    </div>

                    <form [formGroup]="otpForm" (ngSubmit)="verifyOTP()">
                        <p class="mb-4 text-gray-600 dark:text-neutral-300">Enter the OTP sent to your email</p>

                        <!-- OTP Input -->
                        <div class="mb-6">
                            <label for="otp"
                                class="block text-sm font-medium text-gray-600 dark:text-gray-300">OTP Code</label>
                            <input type="text" id="otp" formControlName="otp" placeholder="Enter 6-digit OTP"
                                maxlength="6"
                                class="w-full px-4 py-2 mt-1 text-gray-800 bg-gray-100 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-gray-700 dark:text-white dark:border-gray-600" />
                            <div *ngIf="otpForm.get('otp')?.invalid && otpForm.get('otp')?.touched" class="text-red-500 text-sm mt-1">
                                <span *ngIf="otpForm.get('otp')?.errors?.['required']">OTP is required</span>
                                <span *ngIf="otpForm.get('otp')?.errors?.['minlength']">OTP must be 6 digits</span>
                            </div>
                        </div>

                        <!-- Verify Button -->
                        <div class="text-center mb-4">
                            <button type="submit" [disabled]="isSubmitting || otpForm.invalid"
                                class="w-full px-6 py-2.5 text-white font-semibold text-sm uppercase rounded-lg shadow-md transition-all bg-gradient-to-r bg-green-500 hover:shadow-lg hover:brightness-110 focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed">
                                <span *ngIf="!isSubmitting">Verify OTP</span>
                                <span *ngIf="isSubmitting">Verifying...</span>
                            </button>
                        </div>

                        <!-- Back to Registration -->
                        <div class="text-center">
                            <button type="button" (click)="currentStep = 1"
                                class="px-6 py-2 text-gray-500 border border-gray-300 rounded-lg text-sm font-medium transition-all hover:bg-gray-100 focus:ring-2 focus:ring-gray-300">
                                Back to Registration
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Right Column (Info) -->
                <div class="hidden lg:flex items-center justify-center lg:w-6/12 bg-gradient-to-r text-white rounded-b-lg lg:rounded-r-lg lg:rounded-bl-none">
                    <div class="w-screen text-center">
                        <img class="mb-4"
                            src="https://untgtsclbjlgemwljimq.supabase.co/storage/v1/object/public/Wedding%20Vender%20managment%20System//Register-img.jpg"
                            alt="Company Image" />
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>