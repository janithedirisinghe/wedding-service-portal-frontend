<div class="flex flex-col items-center w-full mx-auto p-4 bg-white border border-gray-200 rounded-lg shadow-lg">
    <form [formGroup]="postForm" (ngSubmit)="onSubmit()" class="w-full">
        <!-- Upload Area -->
        <div class="flex items-center justify-center w-full mb-4">
            <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100">
                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                    <svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
                    </svg>
                    <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p>
                    <p class="text-xs text-gray-500">SVG, PNG, JPG, or GIF (MAX. 800x400px)</p>
                </div>
                <input id="dropzone-file" type="file" class="hidden" multiple (change)="onFileSelect($event)" />
            </label>
        </div>

        <!-- Selected Files Display -->
        <div *ngIf="selectedFiles.length > 0" class="mb-4">
            <h4 class="text-sm font-semibold text-gray-700 mb-2">Selected Files:</h4>
            <div class="space-y-2">
                <div *ngFor="let file of selectedFiles; let i = index" class="flex items-center justify-between bg-gray-50 p-2 rounded">
                    <span class="text-sm text-gray-600">{{ file.name }}</span>
                    <button type="button" (click)="removeFile(i)" class="text-red-500 hover:text-red-700">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Form Fields -->
        <div class="space-y-4 mb-4">
            <!-- Content/Description -->
            <div>
                <label for="content" class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                <textarea 
                    id="content" 
                    formControlName="content"
                    rows="3" 
                    placeholder="Enter the description for the post" 
                    class="w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 p-3 resize-none">
                </textarea>
                <div *ngIf="postForm.get('content')?.invalid && postForm.get('content')?.touched" class="text-red-500 text-xs mt-1">
                    <span *ngIf="postForm.get('content')?.errors?.['required']">Description is required</span>
                    <span *ngIf="postForm.get('content')?.errors?.['minlength']">Description must be at least 10 characters</span>
                </div>
            </div>

            <!-- Location -->
            <div>
                <label for="location" class="block text-sm font-medium text-gray-700 mb-1">Location *</label>
                <input 
                    type="text" 
                    id="location" 
                    formControlName="location"
                    placeholder="Enter the location" 
                    class="w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 p-3">
                <div *ngIf="postForm.get('location')?.invalid && postForm.get('location')?.touched" class="text-red-500 text-xs mt-1">
                    <span *ngIf="postForm.get('location')?.errors?.['required']">Location is required</span>
                    <span *ngIf="postForm.get('location')?.errors?.['minlength']">Location must be at least 3 characters</span>
                </div>
            </div>

            <!-- Date -->
            <div>
                <label for="date" class="block text-sm font-medium text-gray-700 mb-1">Date *</label>
                <input 
                    type="date" 
                    id="date" 
                    formControlName="date"
                    class="w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 p-3">
                <div *ngIf="postForm.get('date')?.invalid && postForm.get('date')?.touched" class="text-red-500 text-xs mt-1">
                    <span *ngIf="postForm.get('date')?.errors?.['required']">Date is required</span>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-end">
            <button 
                type="submit" 
                [disabled]="postForm.invalid || isSubmitting"
                class="px-6 py-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors">
                {{ isSubmitting ? 'Creating Post...' : 'Create Post' }}
            </button>
        </div>
    </form>
</div>
